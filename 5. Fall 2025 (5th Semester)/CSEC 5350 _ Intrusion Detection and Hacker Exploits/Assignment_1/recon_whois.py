
import whois

def read_domains_from_file(file_path):
    """Reads domains from a given file and returns them as a list."""
    try:
        with open(file_path, 'r') as file:
            domains = [line.strip() for line in file.readlines() if line.strip()]
        return domains
    except FileNotFoundError:
        print(f"Error: The file {file_path} was not found.")
        return []

def get_whois_info(domain):
    """Retrieves WHOIS information for a given domain."""
    try:
        domain_info = whois.whois(domain)
        return domain_info
    except Exception as e:
        return f"Error retrieving WHOIS info for {domain}: {e}"

def write_whois_results_to_file(results, output_file):
    """Writes WHOIS results to an output file."""
    try:
        with open(output_file, 'w') as file:
            for domain, info in results.items():
                file.write(f"WHOIS info for {domain}:\n{info}\n{'-'*40}\n")
        print(f"WHOIS results saved to {output_file}")
    except Exception as e:
        print(f"Error writing to file {output_file}: {e}")

def main():
    file_path = "5. Fall 2025 (5th Semester)/CSEC 5350 _ Intrusion Detection and Hacker Exploits/Assignment_1/domains.txt"
    output_file = "5. Fall 2025 (5th Semester)/CSEC 5350 _ Intrusion Detection and Hacker Exploits/Assignment_1/whois_results.txt"  # Output file path
    domains = read_domains_from_file(file_path)
    
    if not domains:
        print("No domains found to check.")
        return
    
    whois_results = {}
    for domain in domains:
        print(f"\nChecking WHOIS info for: {domain}")
        info = get_whois_info(domain)
        print(info)
        whois_results[domain] = info
    
    write_whois_results_to_file(whois_results, output_file)

if __name__ == "__main__":
    main()
